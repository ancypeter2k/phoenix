<body class="bg-[#18191a] text-gray-200 m-0 p-0 flex flex-col md:flex-row min-h-screen">
    <!-- Sidebar -->
    <%- include("./sidebar.ejs") %>
    <!-- Sidebar end -->

    <!-- Main Content -->
    <div class="flex-grow flex flex-col w-full md:w-auto">
        <!-- Navbar -->
        <nav class="bg-[#18191a] h-11 shadow-md flex items-center justify-center px-6 sticky top-0 z-10">
            <div class="relative w-2/5">
                <input type="text" placeholder="Search Coupons" 
                       class="bg-[#242526] text-gray-200 text-sm px-4 py-2 rounded-full w-full pr-10 focus:outline-none focus:ring-2 focus:ring-gray-500">
                <button class="absolute right-2 top-1/2 transform -translate-y-1/2" aria-label="Search">
                    <i class="fas fa-search text-gray-400"></i>
                </button>
            </div>
        </nav>
        <!-- Navbar end -->

        <!-- Table -->
        <div class="flex-grow p-4 overflow-y-auto">
            <!-- Add New Coupon Button -->
            <h1 class="text-4xl font-semibold text-start mb-6">Coupon Management </h1>
            <div class="flex justify-end items-center mb-4">
                <a href="/admin/coupons/add" 
                   class="bg-blue-600 text-white py-2 px-4 rounded-xl hover:bg-blue-700 transition ease-in-out transform hover:-translate-y-1 hover:scale-110">
                    Add New Coupon
                </a>
            </div>

        <!-- Coupon Table -->
        <% if (coupons.length > 0) { %>
            <!-- Coupon Table -->
            <div class="bg-[#242526] rounded-lg shadow-lg overflow-x-auto">
                <table class="w-full text-sm text-left text-gray-300">
                    <thead class="text-xs bg-[#1f1f1f] text-orange-500 text-center">
                        <tr>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Code</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Discount Type</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Discount Amount</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Minimum Purchase</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Valid From</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Valid Until</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Usage Limit</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Used Count</th>
                            <th scope="col" class="px-6 py-4 font-medium text-xl">Active</th>
                        </tr>
                    </thead>

                    <!-- Table Body -->
                    <tbody class="text-gray-300">
                        <% coupons.forEach(coupon => { %>
                            <tr class="hover:bg-orange-900">
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.code %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.discountType %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.discountAmount %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.minimumPurchase || 'N/A' %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= new Date(coupon.validFrom).toLocaleDateString() %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= new Date(coupon.validUntil).toLocaleDateString() %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.usageLimit || 'Unlimited' %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.usedCount %></td>
                                <td class="px-6 py-4 text-lg text-center"><%= coupon.isActive ? 'Yes' : 'No' %></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } else { %>
            <!-- No Coupons Available -->
            <p class="text-center text-gray-300 mt-6">No coupons available.</p>
        <% } %>
    </div>
</body>
